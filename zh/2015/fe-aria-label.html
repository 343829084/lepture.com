<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>前端的基础修养：aria-label — Just lepture</title>
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152.png">
  <link rel="logo" type="image/svg" href="/logo.svg">
  <link rel="dns-prefetch" href="http://dn-lepture.qbox.me">
  <link rel="alternate" type="application/atom+xml" title="Subscribe Feed" href="http://feeds.lepture.com/lepture">
<meta property="og:type" content="article">
<meta property="og:title" content="前端的基础修养：aria-label">
<meta property="og:url" content="http://lepture.com/zh/2015/fe-aria-label">
  <meta name="description" content="aria-label 是一个 HTML attribute，用来告诉读屏软件某个元素是什么，提升 Web Accessibility。">
  <meta property="og:description" content="aria-label 是一个 HTML attribute，用来告诉读屏软件某个元素是什么，提升 Web Accessibility。">
  <meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@lepture">
<meta name="twitter:creator" content="@lepture">
<meta name="twitter:domain" content="lepture.com">
<meta property="og:site_name" content="Just lepture">
  <meta property="og:locale" content="zh_TW">
<link rel="canonical" href="http://lepture.com/zh/2015/fe-aria-label"><meta name="google-analytics" content="UA-21475122-1">
<meta name="google-site-verification" content="at2ye66Rzr0dthIDpBZfL4nUZWPBS336jT9NUHaLSHM" />
<link rel="stylesheet" href="/assets/site.css?t=1437645997">
<link rel="stylesheet" href="/assets/font.css?t=1437645997"></head>
<body>
  <header id="header">
    <div class="container yue">
      <a id="brand" href="/">
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="24px" height="24px" viewBox="0 0 240 240" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <title>lepture</title>
    <description>Created with Sketch (http://www.bohemiancoding.com/sketch)</description>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <path d="M156.613464,113.999999 L235.90968,113.999965 C233.495105,53.9540791 182.972141,6 121,6 C57.4872506,6 6,56.3679626 6,118.5 C6,180.632037 57.4872506,231 121,231 C182.627716,231 232.933165,183.577472 235.86497,124.000065 L235.864973,124 L156.613465,124 C154.053154,140.407155 139.083693,153 121,153 C101.117748,153 85,137.777682 85,119 C85,100.222318 101.117748,85 121,85 C139.083692,85 154.053154,97.5928448 156.613464,113.999999 Z" id="Oval-1" fill="#000000" sketch:type="MSShapeGroup"></path>
    </g>
</svg>        <strong>Just lepture</strong>
      </a>
      <nav id="nav">
          <a href="/resume">About</a>
          <a href="/zh/">Chinese</a>
          <a href="/en/">English</a>
      </nav>
    </div>
  </header>
    <article id="main" role="main" class="hentry yue" itemscope itemtype="http://schema.org/Article">
<div class="entry-header">
  <div class="container">
    <h1 class="entry-title" itemprop="name">前端的基础修养：aria-label</h1>
    <p class="entry-description" itemprop="headline">aria-label 是一个 HTML attribute，用来告诉读屏软件某个元素是什么，提升 Web Accessibility。</p>

    <div class="entry-meta">
        <time class="updated" datetime="2015-08-12T21:40:00+08:00" itemprop="datePublished" pubdate>
          Aug 12, 2015
        </time>
        <span>1470 words</span>

    </div>
  </div>
</div>
  <div class="entry-content container" itemprop="articleBody">
    <p>「前端的基础修养」是我拟写的一系列文章的总标题。所以唤作「修养」，大抵因为心虚，觉得没有什么技术含量，不便言之技术。这一系列会以乱序呈现，同一主题的文章会穿插出现。</p>
<p>这一篇谈 Accessibility 相关的主题——aria-label 的使用。Accessibility 作为一个整体，是一个庞大而复杂的主题。这里单讲 aria-label，因其比较简单与实用，作为切入点正合适。</p>
<p>可能有人不理解什么是 Accessibility，这里简单解释一下。比如地铁有大通道方便轮椅通过，比如红绿灯有声音提示方便盲人通行，比如鼠标有左手模式方便习惯用左手的人使用。让更广泛（生理上有所不同）的人群可以使用，就是 Accessibility。</p>
<p>这个话题去岁在台湾谈过，是参加 JSDC 2014 时讲的，<a href="/zh/2014/talk-on-accessibility-jsdc2014">不被重視的 HTML：Accessibility</a>。</p>
<h2>aria-label 初窥</h2>
<p>aria-label 是一个 HTML attribute，用来告诉读屏软件某个元素是什么。例如一个关闭按钮「×」，视觉上看来都能理解，但是读屏软件并不能正确读出，这时就可以用 <code>aria-label</code> 告诉它：</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">aria-label=</span><span class="s">&quot;关闭&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;times;</span><span class="nt">&lt;/button&gt;</span>
</pre></div>
<p>读屏软件（比如说 Voice Over）就会读出「按钮，关闭」。图片 <code>&lt;img&gt;</code> 的 <code>alt</code> 属性亦有此效果，因为图片本身是没有办法被读出的，所以读屏软件会去阅读 <code>alt</code> 的内容。</p>
<p>假如 <code>&lt;img&gt;</code> 标签同时有 <code>aria-label</code> 与 <code>alt</code> 属性，那么读屏软件应该阅读哪个的内容呢？答案当然是 <code>aria-label</code>。这里需要明白 <code>alt</code> 本身还有另一个作用，当图片无法加载时，浏览器会将 <code>alt</code> 的内容展示给用户。</p>
<figure><img data-src="//dn-lepture.qbox.me/blog/image-alt.jpg" alt="alt 在各个浏览器里的显示情况" /><figcaption>alt 在各个浏览器里的显示情况</figcaption></figure><h2>aria-label 与 title</h2>
<p>全局属性 <code>title</code> 是用作提示与补充的，你认为读屏软件会识别 <code>title</code> 么？完全不会，Voice Over<sup class="footnote-ref" id="fnref-vo"><a href="#fn-vo" rel="footnote">1</a></sup>、JAWS<sup class="footnote-ref" id="fnref-jaws"><a href="#fn-jaws" rel="footnote">2</a></sup>、NVDA<sup class="footnote-ref" id="fnref-nvda"><a href="#fn-nvda" rel="footnote">3</a></sup> 都不会去识别，<code>title</code> 对于 Accessibility 毫无帮助。</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">title=</span><span class="s">&quot;设置&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;gear.png&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</pre></div>
<p>这段代码是一个链接，使用一个图片表示「设置」，使用 <code>title</code> 注释。如果鼠标悬浮在链接上的话，会出现提示，但是读屏软件根本无法识别。你应该使用 <code>aria-label</code> 来代替 <code>title</code>:</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;设置&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;gear.png&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</pre></div>
<h2>aria-label 与 iconfont</h2>
<p>多数网站已经不使用图片来表示 icon 了，转而使用 iconfont 又或者 svg。无论是哪种方案，图标都只是给视觉正常的人使用的。这个时候你需要使用 <code>arial-label</code> 来标注：</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;设置&quot;</span><span class="nt">&gt;&lt;/i&gt;&lt;/a&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;设置&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span><span class="nt">&gt;&lt;/i&gt;&lt;/a&gt;</span>
</pre></div>
<p>上面的例子里给出了两种方案，一是在图标本身的标签上，一是在链接 <code>&lt;a&gt;</code> 上，两种方案读屏软件都能正确识别，但是个人以为放在链接 <code>&lt;a&gt;</code> 上比较好，比如链接里是图标加文字说明的形式：</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;设置&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> 设置<span class="nt">&lt;/a&gt;</span>
</pre></div>
<p>这时便不能在 iconfont 上添加 <code>aria-label</code> 了，否则会念两遍「设置」，但是这种情况更好的方法是使用 <code>aria-hidden</code>：</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span> <span class="na">aria-hidden=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> 设置<span class="nt">&lt;/a&gt;</span>
</pre></div>
<h2>aria-label 作为提示</h2>
<p>但是许多时候，即使你能看清楚图标，你也完全不知道那是个什么鬼东西，图标始终是一个抽象概念，并非人人都能理解。我们常会用 tooltip 作为提示，比如 <a href="http://onehackoranother.com/projects/jquery/tipsy/">jquery.tipsy</a>。</p>
<p>jquery.tipsy 这个插件默认使用 <code>title</code> 作为数据来源，也可以使用其它属性：</p>
<div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#example-custom-attribute&#39;</span><span class="p">).</span><span class="nx">tipsy</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;aria-label&#39;</span><span class="p">});</span>
</pre></div>
<p>GitHub 使用的纯 CSS 方案不错，使用 CSS <code>attr()</code> 获取 arial-label 的内容作为提示，在不需要兼容老旧浏览器的情况下建议使用，整理代码如下：</p>
<div class="highlight"><pre><span class="nc">.tip</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.tip</span><span class="nd">:before</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
  <span class="k">bottom</span><span class="o">:</span> <span class="m">-7px</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="m">-5px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="k">border</span><span class="o">:</span> <span class="m">5px</span> <span class="k">solid</span> <span class="k">transparent</span><span class="p">;</span>
  <span class="k">border-bottom-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">9</span><span class="p">);</span>
  <span class="k">pointer</span><span class="o">-</span><span class="n">events</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">z-index</span><span class="o">:</span> <span class="m">10000</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.tip</span><span class="nd">:after</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">3px</span><span class="p">;</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">9</span><span class="p">);</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">11px</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="m">500</span><span class="p">;</span>
  <span class="k">content</span><span class="o">:</span> <span class="n">attr</span><span class="p">(</span><span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="p">);</span>
  <span class="k">white-space</span><span class="o">:</span> <span class="n">pre</span><span class="p">;</span>
  <span class="k">z-index</span><span class="o">:</span> <span class="m">10000</span><span class="p">;</span>
  <span class="k">margin-top</span><span class="o">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="k">line-height</span><span class="o">:</span> <span class="m">26px</span><span class="p">;</span>
  <span class="n">transform</span><span class="o">:</span> <span class="n">translateX</span><span class="p">(</span><span class="m">50%</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<figure><img data-src="//dn-lepture.qbox.me/blog/github-aria-label.png" alt="GitHub aria-label 提示" /><figcaption>GitHub 使用 aria-label 提示</figcaption></figure><h2>aria-label 与表单</h2>
<p><code>placeholder</code> 的出现导致了大量不带 <code>&lt;label&gt;</code> 的 form 表单，然而<strong>读屏软件是不会识别 <code>placeholder</code></strong> 的。例如：</p>
<div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;用户名&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;邮箱&quot;</span><span class="nt">&gt;</span>
</pre></div>
<p>对于视觉正常的人来说没有问题，但是在读屏软件看来它只是两个输入框，至于需要输入什么，它是不知道的。这个时候你需要用 <code>aria-label</code> 再次标注：</p>
<div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;用户名&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;用户名&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;邮箱&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;邮箱&quot;</span><span class="nt">&gt;</span>
</pre></div>
<p>还有另外一种方案，使用 <code>&lt;label&gt;</code>，但是不显示 <code>&lt;label&gt;</code>：</p>
<div class="highlight"><pre><span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span> <span class="na">class=</span><span class="s">&quot;sr-only&quot;</span><span class="nt">&gt;</span>用户名<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;username&quot;</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;用户名&quot;</span><span class="nt">&gt;</span>
</pre></div>
<p>使用 CSS 来隐藏 <code>.sr-only</code>(screen reader only) 这个 class 的标签，注意不能使用 <code>display: none</code>，否则读屏软件会忽略，只在<a href="http://a11yproject.com/posts/how-to-hide-content/">视觉上将其隐藏</a>即可。</p>
<h2>索引</h2>
<p><code>aria-label</code> 理论上是作用于所有 tag 的，但是我实际测试下来，不支持 h(n) 例如 h1-h6。</p>
<ul>
<li><a href="https://dev.opera.com/articles/ux-accessibility-aria-label/">dev.opera.com/articles/ux-accessibility-aria-label/</a></li>
<li><a href="http://webaim.org/techniques/forms/advanced">webaim.org/techniques/forms/advanced</a></li>
<li><a href="http://www.deque.com/blog/text-links-practices-screen-readers/">www.deque.com/blog/text-links-practices-screen-readers/</a></li>
<li><a href="http://www.w3.org/TR/2015/WD-aria-in-html-20150521/">www.w3.org/TR/2015/WD-aria-in-html-20150521/</a></li>
</ul>
<div class="footnotes">
<hr>
<ol><li id="fn-vo"><p>Voice Over 是 Apple (Mac &amp; iOS) 的读屏软件<a href="#fnref-vo" rev="footnote">&#8617;</a></p></li>
<li id="fn-jaws"><p>JAWS 是一个读屏软件，适用于 Windows<a href="#fnref-jaws" rev="footnote">&#8617;</a></p></li>
<li id="fn-nvda"><p>NVDA 是一个开源读屏软件 <a href="http://www.nvaccess.org/">www.nvaccess.org/</a><a href="#fnref-nvda" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

  </div>

    <span class="author vcard hide">
      <span class="fn" itemprop="author">Hsiaoming Yang</span>
    </span>
  </div>

  <div class="entry-extra container">
    <div class="entry-tags">
      <a class="tag" href="/archive#fe-basic">fe-basic</a>
      <a class="tag" href="/archive#wai-aria">wai-aria</a>
    </div>
    <div class="social-button" data-url="http://lepture.com/zh/2015/fe-aria-label" data-text="前端的基础修养：aria-label — aria-label 是一个 HTML attribute，用来告诉读屏软件某个元素是什么，提升 Web Accessibility。" data-twitter="lepture" data-weibo="lepture" data-facebook="lepture" data-count="true"></div>
  </div>

</article>


<div class="entry-comments yue">
  <div id="disqus_thread" class="container"></div>
</div>
<script>
    var disqus_shortname='lepture';
    var disqus_title='前端的基础修养：aria-label';
    var disqus_url='http://lepture.com/zh/2015/fe-aria-label';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <footer id="footer">
    <div class="container">
      <p>&copy; Copyright 2010 - 2015 by Hsiaoming Yang.</p>
    </div>
  </footer>
  <script src="/assets/site.js?t=1437795036"></script>
</body>
</html>